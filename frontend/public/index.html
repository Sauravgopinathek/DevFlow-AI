<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <meta name="description" content="DevFlow AI - Automate your developer workflows" />
  <title>DevFlow AI</title>

  <!-- Theme Initialization Script - Prevents Flash of Wrong Theme -->
  <script>
    (function () {
      try {
        // Get theme from localStorage immediately
        const settings = localStorage.getItem('devflow-settings');
        let theme = 'light'; // Default theme

        if (settings) {
          const parsed = JSON.parse(settings);
          theme = parsed.preferences?.theme || 'light';
        }

        console.log('ðŸš€ Pre-loading theme:', theme);

        // Apply theme class immediately to prevent flash
        const root = document.documentElement;
        const body = document.body;

        // Remove any existing theme classes
        root.classList.remove('theme-light', 'theme-dark', 'theme-auto');

        // Set initial background color immediately
        let isDark = false;

        if (theme === 'auto') {
          isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          const themeClass = isDark ? 'theme-dark' : 'theme-light';
          root.classList.add('theme-auto', themeClass);
        } else {
          isDark = theme === 'dark';
          root.classList.add('theme-' + theme);
        }

        // Set background color immediately to prevent flash
        body.style.backgroundColor = isDark ? '#0A0A0F' : '#FFFFFF';
        body.style.color = isDark ? '#FFFFFF' : '#212121';

        console.log('âœ… Pre-loaded theme applied:', theme);
      } catch (error) {
        console.error('Theme pre-loading failed:', error);
        // Fallback to light theme
        document.documentElement.classList.add('theme-light');
      }
    })();
  </script>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
</body>

</html>